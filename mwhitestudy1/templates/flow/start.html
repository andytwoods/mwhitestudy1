{% extends "base.html" %}
{% load static %}

{% block content %}
<main id="screen-root">
    {% include "flow/_screen.html" with screen=screen %}
</main>
{% endblock content %}

{% block inline_javascript %}
<script>
    document.body.addEventListener('keydown', function(event) {
        if (event.code === 'Space') {
            const activeElement = document.activeElement;
            const isInput = activeElement.tagName === 'INPUT' ||
                            activeElement.tagName === 'TEXTAREA' ||
                            activeElement.tagName === 'SELECT' ||
                            activeElement.isContentEditable;

            if (!isInput) {
                const advanceBtn = document.querySelector('[hx-trigger="advance"]');
                if (advanceBtn) {
                    event.preventDefault();
                    htmx.trigger(advanceBtn, 'advance');
                }
            }
        }
    });

    document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    });
</script>
{% endblock inline_javascript %}
